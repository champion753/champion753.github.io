---
title: 'การดึงข้อมูลแผ่นดินไหวและแสดงผล (DailySeismicEvent)'
date: 2025-12-12
permalink: /posts/2013/08/DailySeismicEvent/
tags:
  - Earthquake
  - DailySeismicEvent
  - Coding
---

1. วัตถุประสงค์
เพื่อติดตามและเฝ้าระวังเหตุการณ์แผ่นดินไหวที่เกิดขึ้นในประเทศไทยและบริเวณใกล้เคียง โดยนำข้อมูลดิบจากกรมอุตุนิยมวิทยามาแสดงผลบนแผนที่มืด (Dark Mode) เพื่อให้เห็นจุดความร้อน (Hotspots) และความรุนแรงของแผ่นดินไหวได้อย่างชัดเจน
2. การเลือกใช้ API
•	API Name: DailySeismicEvent (รายงานแผ่นดินไหวประจำวัน)
•	เหตุผลที่เลือก: ข้อมูลแผ่นดินไหวเป็นข้อมูลที่มีพิกัด (Latitude/Longitude) ชัดเจน เหมาะแก่การนำมาทำ Visualization บนแผนที่ และมีความสำคัญต่อการเฝ้าระวังภัยธรรมชาติ
3. เทคนิคการเขียนโปรแกรม (Code Highlights)
การจัดการข้อมูล (Data Handling)
•	ดึงข้อมูลผ่าน API และถอดรหัส XML โดยเจาะจงที่ Tag <Earthquake>
•	คัดกรองเฉพาะเหตุการณ์ที่มีข้อมูลพิกัดและขนาดความรุนแรง (Magnitude) ครบถ้วน เพื่อป้องกันข้อผิดพลาดในการพลอต
การแสดงผล (Visualization Techniques)
•	Base Map: เลือกใช้แผนที่แบบ CartoDB Dark Matter (ธีมมืด) เพื่อให้จุดสีของแผ่นดินไหวมีความโดดเด่น ตัดกับพื้นหลัง
•	Marker Cluster: ใช้เทคนิคการรวมกลุ่มจุด (Clustering) เมื่อผู้ใช้งานซูมออก แผนที่จะรวมจุดใกล้เคียงเป็นกลุ่มก้อนพร้อมตัวเลขบอกจำนวน เพื่อไม่ให้แผนที่ดูรกเกินไป
•	Magnitude Color Scaling: กำหนดสีของจุดตามความรุนแรง
o	สีเขียว: แผ่นดินไหวขนาดเล็ก
o	สีเหลือง: ขนาดปานกลาง
o	สีแดง: ขนาดรุนแรง
•	CSS Injection: มีการเขียน CSS แทรกเข้าไปในไฟล์ HTML เพื่อปรับแต่งตัวอักษรของคำอธิบาย (Legend) ให้เป็นสีขาวและมีขอบดำ เพื่อให้อ่านออกได้ชัดเจนบนพื้นหลังสีดำ
4. ผลลัพธ์ (Output)
ไฟล์ผลลัพธ์ seismic_map_clustered.html แสดงตำแหน่งศูนย์กลางแผ่นดินไหว โดยขนาดวงกลมจะแปรผันตามความรุนแรง (Magnitude) ผู้ใช้สามารถคลิกที่จุดเพื่อดูรายละเอียด เช่น เวลาที่เกิด, ความลึก และสถานที่เกิดเหตุได้
